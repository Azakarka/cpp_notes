
## **strong-exception guarantee


```cpp
// –ø—É—Å—Ç—å —É –Ω–∞—Å –µ—Å—Ç—å –∫–∞–∫–æ–π-—Ç–æ –∫–ª–∞—Å—Å —Å—Ç—Ä–∏–Ω–≥, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –≤ —Å–µ–±–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ —Å—Ç—Ä–æ–∫—É
class String{
	...
	private:
	char* data_;
}

// –æ—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º –Ω–∞–ø–∏—Å–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è, —á—Ç–æ–±—ã –≤—Å–µ —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–ª–æ
String& operator=(const String & other) {
	if (this == &other) {
		return *this;
	}
	data_ = new char[other.size_];
	size_ = other.size_;
	std::memcpy(data_, other.data_, size_); // –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–µ—Ç deepcopy —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
}
```

```cpp
// —Ç–µ–ø–µ—Ä—å —Ä–∞–∑–±–µ—Ä–µ–º –ø—Ä–∏–º–µ—Ä –Ω–∞ –æ—à–∏–±–∫–∏
// 1) –∑–∞–º–µ—Ç–∏–º —á—Ç–æ –º—ã –ø–æ–ª—É—á–∞–µ–º MemoryLeak, –ø–æ—ç—Ç–æ–º—É
String& operator=(const String & other) {
	...
	delete[] data_; // —É–¥–∞–ª—è–µ–º –∑–∞–Ω—è—Ç—É—é –ø–∞–º—è—Ç—å
	data_ = new char[other.size_]
	...
}
// –≤–µ–¥—å —Ç–∞–∫ –∫–∞–∫ —É –Ω–∞—Å –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è, —É –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å –∫–∞–∫–æ–π-—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ–±—ä–µ–∫—Ç, –∞ –∑–Ω–∞—á–∏—Ç –∏ –≤—ã–¥–µ–ª–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å
// –ø–æ—ç—Ç–º–æ—É –µ–µ –æ—á–∏—â–∞–µ–º

```

```cpp
// 2) —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ —É –Ω–∞—Å –Ω–µ –≤—ã–¥–µ–ª–∏–ª–∞—Å—å –ø–∞–º—è—Ç—å, —Ç–æ–≥–¥–∞
String& operator=(const String & other) {
	...
	delete[] data_; // –º—ã –æ—á–∏—Å—Ç–∏–ª–∏ –æ–±—ä–µ–∫—Ç
	data_ = new char[other.size_]; // —Ç—É—Ç —É–ø–∞–ª–æ bad::alloc
	...
}
// –∏—Ç–æ–≥–æ: –æ–±—ä–µ–∫—Ç –∏—Å–ø–æ—Ä—á–µ–Ω
// –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞, –µ—Å–ª–∏ –≤—ã–ª–µ–∑–∞–µ—Ç –∫–∞–∫–∞—è-—Ç–æ –æ—à–∏–±–∫–∞ –µ–µ –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å, –ø–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```

```cpp
// –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å —ç—Ç—É –ª–∞–∂—É –≤–æ—Ç —Ç–∞–∫–∏–º –∫–æ–¥–æ–º
String& operator=(const String & other) {
	...
	auto* tmp = new char[other.size_];
	delete[] data_;
	data_ = tmp;
	...
}
// –ø–æ–ª—É—á–∏–ª–∏: –µ—Å–ª–∏ –ª–æ–≤–∏–º bad::alloc, –≤—ã–ª–µ–∑–∞–µ–º –∏–∑ –º–µ—Ç–æ–¥–∞ —Å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º, –Ω–µ–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
// –µ—Å–ª–∏ bad_alloc –Ω–µ –ª–æ–≤–∏–º, —Ç–æ –≤—Å–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç
```


# *RVO*
```cpp

// –Ω–∞–ø–∏—à–µ–º –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π –∫–æ–¥

String MakeString(const char* str) {
	return String(str);
}

int main() {
	std::cout << MakeString("world") << std::endl;
}
// —á—Ç–æ –º—ã –æ–∂–∏–¥–∞–µ–º —É–≤–∏–¥–µ—Ç—å?
// 1) Constructor –æ—Ç str –≤ MakeString
// 2) Copy Constructor –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –∏–∑ main
// 3) Destructor –æ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏
// 4) Destuctor –æ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≤ main

// —Ç—É—Ç –≤—Å—Ç—É–ø–∞–µ—Ç –≤ —Å–∏–ª—É RVO - return value optimization
```

> RVO - –º–µ—Ö–∞–Ω–∏–∑–º –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∫–æ–ø–∏–π

–æ–Ω–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –µ—Å–ª–∏ —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–∏–ø–æ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏(const —Ç–æ–∂–µ –ø–æ–¥—Ö–æ–¥–∏—Ç), —Ç–æ –∫–æ–ø–∏—Ä–∫–∞ –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç: –≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è, –∞ —Å—Ä–∞–∑—É –∑–∞–ø–∏—à–µ—Ç—Å—è.
```cpp
// —Ç–æ –µ—Å—Ç—å –∫–æ–¥ –≤—ã—à–µ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–µ–Ω
void MakeString(const char* str, String &res) {
	res = String(str);
}

int main() {
	String result; // –ø—Ä–∏—á–µ–º –∫–æ–¥ –Ω–µ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–µ–Ω, —Ç–∞–∫ –∫–∞–∫ —Ç—É—Ç –≤—ã–∑–æ–≤–µ—Ç—Å—è –ø—É—Å—Ç–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
	MakeString("world", result); 
	std::cout << result << std::endl;
}
```

```cpp
// –¥–∞–∂–µ —Ç–∞–∫–æ–π –∫–æ–¥ —é–∑–∞–Ω–µ—Ç RVO, —Ö–æ—Ç—è result —É–∂–µ –Ω–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–π, –∞ –∏–º–µ–Ω–Ω–æ–π
String MakeString(const char* str) {
	String result(str);
	return result; // NRVO –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ
}

int main() {
	std::cout << MakeString("world") << std::endl;
}
```


–¥—Ä—É–≥–æ–π –ø—Ä–∏–º–µ—Ä
```cpp

String str = String("hello");
// –û–ø—è—Ç—å —Ç–∞–∫–∏ —á—Ç–æ –æ–∂–∏–¥–∞–µ–º?
// 1) –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ—Ç —Å—Ç—Ä–∏–Ω–≥–∞
// 2) –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ—Ç –¥—Ä—É–≥–æ–≥–æ —Å—Ç—Ä–∏–Ω–≥–∞
// 3) –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è 
// 4) –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å—Ç—Ä–∏–Ω–≥–∞

// —Ç—É—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –µ—â–µ –æ–¥–∏–Ω –º–µ—Ö–∞–Ω–∏–∑–º copy-elision

// –µ—Å–ª–∏ –º—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ T –≤—Ä–µ–º–µ–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º —Ç–∏–ø–∞ T, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

String str = String(String("hello")); // –∏ —Ç–∞–∫–æ–µ —Ç–æ–∂–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç
```


—Ç—Ä–µ—Ç–∏–π –ø—Ä–∏–º–µ—Ä
```cpp
void PrintString(String str) {
	std::cout << str << std::endl;
}

int main() {
	String str("hello");
	PrintString(str);
}
// —Ç–∞–∫ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏—é PrintString

// –µ—Å–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –æ–±—ä–µ–∫—Ç –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã–π
PrintString(String("hello"));
// —É–∂–µ –Ω–∏–∫–∞–∫–∏—Ö –ª–∏—à–Ω–∏—Ö –∫–æ–ø–∏—Ä–æ–∫ –Ω–µ –±—É–¥–µ—Ç, –æ–±—ä–µ–∫—Ç –ø—Ä–æ—Å—Ç–æ —É–∂–µ —Å–æ–∑–¥–∞—Å—Ç—Å—è –≤ —Å–∞–º–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–µ —Å–æ–∑–¥–∞–≤–∞—è—Å—å –≤ main
```

> [!WARNING] –í–∞–∂–Ω–æ
> copy-elision —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ–≤–ø–∞–¥–∞—é—Ç
> —Å –Ω–µ—è–≤–Ω–æ –ø—Ä–∏–≤–æ–¥—è—â–∏–º–∏—Å—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ 



# *Move-semantics*

```cpp
// NRVO —Ç—É—Ç –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç RVO, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
// –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –ø–æ —Å–≤–æ–µ–º—É —É—Å–º–æ—Ç—Ä–µ–Ω–∏—é
// RVO - –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ
String MakeString(const char* str) {
	String result(str);
	return result; // NRVO
}

int main() {
	std::cout << MakeString("world") << std::endl;
}

// –µ—Å–ª–∏ NRVO –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, —É –Ω–∞—Å –ø–æ–ª—É—á–∞–µ—Ç—Å—è result –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ main, –∞ –ø–æ—Ç–æ–º –Ω–∞–≤—Å–µ–≥–¥–∞ —É–¥–∞–ª—è–µ—Ç—Å—è
// —Ö–æ—á–µ—Ç—Å—è —á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞—Ç—å —Å —ç—Ç–∏–º
```

–í —á–µ–º –∏–¥–µ—è move —Å–µ–º–∞–Ω—Ç–∏–∫–∏?

–ï—Å–ª–∏ –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ –∫–∞–∫–æ–π-—Ç–æ –æ–±—ä–µ–∫—Ç –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, –≤–º–µ—Å—Ç–æ —á–µ—Å—Ç–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–∏—Ç—ã, –∞ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ—Å—Ç–æ —É–∫—Ä–∞—Å—Ç—å –≤—Å–µ, —á—Ç–æ –µ—Å—Ç—å —É —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞

–¢–æ –µ—Å—Ç—å —Å–¥–µ–ª–∞—Ç—å shallow copy.

```cpp
// –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è NRVO
String MakeString(String result) {
	return result;
}

int main() {
	std::cout << MakeString(String("hello")) << std::endl;
}
// –¥–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ String("hello") –æ–Ω —Å—Ä–∞–∑—É –∫–∏–Ω–µ—Ç –≤ —Å—Ç–µ–∫ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–æ –ø—Ä–∏ –≤—ã–≤–æ–¥–µ —É–∂–µ —Å–¥–µ–ª–∞–µ—Ç –∫–æ–ø–∏—é
// –º—ã —Ö–æ—Ç–∏–º —ç—Ç–æ –¥–æ–ø –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—é —Å–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
```

–¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ move —Å–µ–º–∞–Ω—Ç–∏–∫–∏ —É –Ω–∞—Å –µ—Å—Ç—å –¥–≤–∞ –º–µ—Ç–æ–¥–∞ –≤ –∫–ª–∞—Å—Å–µ

## **move contsructor**
–∏–ª–∏ –º—É–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
```cpp
class String{
	String (String&& other) { // —Ç–∞–∫–æ–π —Ç–∏–ø –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è rvalue reference, —Å–ø–µ—Ü —Å—Å—ã–ª–∫–∞ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
		// other —ç—Ç–æ –æ–±—ä–µ–∫—Ç –∫–æ—Ç–æ—Ä—ã–π –º—ã –Ω–µ –±—É–¥–µ–º –±–æ–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
		data_ = other.data_;
		size_ = other.size_;
		// —Ç–∞–∫ –∫–∞–∫ other –≤–æ—Ç-–≤–æ—Ç —É–¥–∞–ª–∏—Ç—Å—è, –Ω–µ –∑–∞–±—ã–≤–∞–µ–º –µ–≥–æ –æ–±–Ω—É–ª—è—Ç—å, –∞ —Ç–æ –Ω–∞—à–∏ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –Ω–∞ –ø—É—Å—Ç–æ—Ç—É —É–∫–∞–∑—ã–≤–∞—Ç—å
		other.data_ = nullptr;
		other.size_ = 0; // –ø–æ –ø—Ä–∏–∫–æ–ª—É
	}
}

// —Ç–µ–ø–µ—Ä—å –≤–∑–Ω–ª—è–Ω–µ–º –Ω–∞ —Ç–æ –∫–∞–∫ –≤—Å–µ –ø–æ–º–µ–Ω—è–ª–æ—Å—å
String MakeString(String result) {
	return result;
}

int main() {
	std::cout << MakeString(String("hello")) << std::endl;
}
// –≤–º–µ—Å—Ç–æ 
// 1) —Å–æ–∑–¥–∞—Ç—å "hello" –≤ MakeString
// 2) –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤ main
// 3) —É–¥–∞–ª–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–∏

// –ø–æ–ª—É—á–∞–µ–º
// 1) —Å–æ–∑–¥–∞—Ç—å "hello" –≤ MakeString
// 2) move-–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤ main
// 3) —É–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç
```


## **move –ø—Ä–∏—Å–≤–∞–≤–∞–Ω–∏–µ**

–º–æ–∑–≥ –µ—â–µ –Ω–µ –ª–æ–ø–Ω—É–ª? –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º!
```cpp
String hello("hello");
String world("world");
String hello_world;
hello_world = hello + world;

// –ø–æ–π–º–µ–º —á—Ç–æ —Ç—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
// 1) —Å–æ–∑–¥–∞–µ—Ç—Å—è hello
// 2) —Å–æ–∑–¥–∞–µ—Ç—Å—è world
// 3) —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω–æ hello_world
String operator+(const String& other) const {
	String result; // 4) —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤–æ—Ç —ç—Ç–æ
	...
	return result; // —Ç—É—Ç —Å—Ä–∞–±–æ—Ç–∞–ª–æ NRVO, –æ–Ω —Å—Ç–∞–ª —Ç–µ–ø–µ—Ä—å hello + world
}
// 5) —É –Ω–∞—Å hello_world = –≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç, –ø–æ–ª—É—á–∞–µ–º –ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä–∫—É, —Ç–∞–∫ –∫–∞–∫ –≤—ã–∑–≤–∞–ª—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è


// –Ω–∞–ø–∏—à–µ–º move –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —á—Ç–æ–±—ã –Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —à–∞–≥–µ 
String& operator=(String&& other) {
	if (this -- &other) { // –¥–∞ —ç—Ç–æ—Ç if –Ω—É–∂–µ–Ω, —Ç–∞–∫ –∫–∞–∫ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –æ–±—ä–µ–∫—Ç —Å–∞–º —Å —Å–æ–±–æ–π –º—É–≤–∞–ª—Å—è
		return *this;
	}
	// —á–∏—Å—Ç–∏–º –Ω–∞—à—É —Å—Ç–∞—Ä—É—é —à—Ç—É–∫—É
	delete[] data_;
	// –≤–æ—Ä—É–µ–º "–∫–∏—à–∫–∏" other
	data_ = other.data_;
	size_ = other.size_;
	// –Ω–µ –∑–∞–±—ã–≤–∞–µ–º –∑–∞–Ω—É–ª–∏—Ç—å other
	other.data_ = nullptr;
	other.size_ = 0;
	return *this;
}	

// —Ç–µ–ø–µ—Ä—å –ø—É–Ω–∫—Ç –≤ –ø—É–Ω–∫—Ç–µ 5 –±—É–¥–µ—Ç –Ω–µ –æ–±—ã—á–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è, –∞ –º—É–≤–Ω—ã–π

// —Å—ç–∫–æ–Ω–æ–º–∏–ª–∏
```

```cpp

// –Ω–µ–±–æ–ª—å—à–æ–µ —Ä–∞–∑—ä—è—Å–Ω–µ–Ω–∏–µ
String hello_world;
hello_world = hello; // –∑–∞–ø—É—Å—Ç–∏—Ç –∫–∞–∫–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä????


// –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ù–ï –º—É–≤–Ω—ã–π, –ø–æ—Ç–æ–º—É —á—Ç–æ hello - –∏–º–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏ –≤—Ä–æ–¥–µ –ø–æ–∫–∞ —É–º–∏—Ä–∞—Ç—å –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è

// –∞ –µ—Å–ª–∏ hello –Ω–∞–º –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è? 

// –¥–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å std::move

// –ø–æ–Ω–∏–º–∞—Ç—å –Ω—É–∂–Ω–æ —Ç–æ, —á—Ç–æ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–∞–º–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –º—É–≤–∏—Ç, –Ω–∏–∫–∞–∫ –≤–æ–æ–±—â–µ –Ω–∏—á–µ–≥–æ –Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç
hello_world = std::move(hello); // move - –ø–æ —Å—É—Ç–∏ —Å–≤–æ–µ–π cast

// —Ç–æ –µ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ cast String –∫ String&&
// —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç—Å—è —É–∂–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è move operator=

// –Ω–∏–∫—Ç–æ –∫—Å—Ç –Ω–µ –º–∞—à–∞–µ—Ç –¥–µ–ª–∞—Ç—å —Ç–∞–∫, —Ç–∞–∫ —á—Ç–æ —Ç–æ—Ç –∏—Ñ–∏–∫ –Ω–µ –∑–∞–±—ã–≤–∞–µ–º
hello = std::move(hello);
```

–Ω–∞–º—É—Å–æ—Ä–∏–ª –∏ —Ä–∞–¥—É–µ—Ç—Å—è üòîüòîüòî
```cpp
// —á—É—Ç–æ–∫ –ø–æ—á–∏—Å—Ç–∏–º –∫–æ–¥
String& operator=(String&& other) {
	if (this -- &other) {
		return *this;
	}
	delete[] data_; // —Ñ—É —É–¥–∞–ª—è—Ç—å
	
	data_ = other.data_; // —Ñ—É –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å
	size_ = other.size_; 
	
	other.data_ = nullptr; // –∞ –ø–æ—Ç–æ–º –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –æ–ø—è—Ç—å
	other.size_ = 0; // –ø–æ —Ñ–∞–∫—Ç—É —Ç—É—Ç –≤–æ–æ–±—â–µ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
	
	return *this;
}

// –∫—Ä—á –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –Ω–∞–º
// –ø–æ–ø—Ä–æ–±—É–µ–º –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–≤–∞–ø—ã
String& operator=(String&& other) {
	std::swap(data_, other.data_);
	std::swap(size_, other.size_);
	return *this;
}	
// –¥—É–º–∞—é –≤—Å–µ–º –ø–æ–Ω—è—Ç–Ω–æ –ø–æ—á–µ–º—É —ç—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç

// –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ —Ç–æ–≥–æ –∂–µ –æ–±—ä–µ–∫—Ç–∞ —Å–≤–∞–ø –Ω–∏—á–µ–≥–æ –Ω–µ —Å–¥–µ–ª–∞–µ—Ç –û–ö

// –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –¥—Ä—É–≥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –º—ã –≤–æ–∑—å–º–µ–º –µ–≥–æ –∫–∏—à–∫–∏ –û–ö

// —Å—Ç–∞—Ä–∞—è –ø–∞–º—è—Ç—å –æ—á–∏—Å—Ç–∏—Ç—Å—è (–≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ —Å—Ä–∞–∑—É –∫–æ–Ω–µ—á–Ω–æ, –Ω–æ) –û–ö
// p.s. —Ç–∞–∫ –∫–∞–∫ –≤—ã–∑–æ–≤–µ—Ç—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ—Ç other, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å—Ç–∞—Ä–∞—è –ø–∞–º—è—Ç—å –∏ –æ—á–∏—Å—Ç–∏—Ç—Å—è


// –Ω—É –ø—Ä–æ—Å—Ç–æ –ª—è–ø–æ—Ç–∞ –∂–µ!
```

—Ç—ã –¥—É–º–∞–µ—à—å –º—ã —Å–æ–±–∏—Ä–∞–ª–∏—Å—å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è?????

–æ–æ–æ–æ –Ω–µ—Ç!!!!
## *–º–∞–≥–∏—è*
```cpp
// –≥–µ–Ω–∏–∞–ª—å–Ω–∞—è –º—ã—Å–ª—å –∞ –¥–∞–≤–∞–π—Ç–µ —ç—Ç–∏ –≤–æ—Ç –∞–º–ø–µ—Ä—Å–∞–Ω–¥–∏–∫–∏ —É–¥–∞–ª–∏–º, –Ω—É –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –æ–Ω–∏ –Ω–∞–º!
String& operator=(String&& other) {
	std::swap(data_, other.data_);
	std::swap(size_, other.size_);
	return *this;
}
// –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –≤
String& operator=(String other) {
	std::swap(data_, other.data_);
	std::swap(size_, other.size_);
	return *this;
}
// –∏ –Ω–µ –∑–∞–±—É–¥–µ–º —É–¥–∞–ª–∏—Ç—å —É–∂–µ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –æ–±—ã—á–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è

// –µ—Å–ª–∏ —É –Ω–∞—Å –±—ã–ª–æ –æ–±—ã—á–Ω–æ–µ
hello_world = hello; // —Ç–æ –µ—Å—Ç—å –∏–º–µ–Ω–Ω–æ–π –Ω–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
// —Ç–æ –º—ã –µ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑ —Å–∫–æ–ø–∏—Ä—É–µ–º –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ —Ñ—É–Ω–∫—Ü–∏—é –∏ –ø–æ—Ç–æ–º –ø—Ä–æ—Å—Ç–æ –≤–æ–∑—å–º–µ–º –æ—Ç –Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ
// –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–π –æ—Å–∞–ª–æ—Å—å –ø—Ä–µ–∂–Ω–∏–º (1)

// –µ—Å–ª–∏ —É –Ω–∞—Å –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç, —Ç–æ —á–µ—Ä–µ–∑ copy-elision —É –Ω–∞—Å –≤—Å–µ —Ö–æ—Ä–æ—à–æ –±–µ–∑ –∫–æ–ø–∏—Ä–æ–Ω–∏–π —Å–¥–µ–ª–∞–µ—Ç—Å—è
// –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–π —Ç–∞–∫–æ–µ –∂–µ (0)

// –µ—Å–ª–∏ —É –Ω–∞—Å –ø–µ—Ä–µ–¥–∞–≤–∞–ª–æ—Å—å &&, —Ç–æ –æ–Ω —É –Ω–∞—Å –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –∫–∞–∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–π, —Ç–∞–∫ —á—Ç–æ –æ–ø—è—Ç—å —Ç–∞–∫–∏
// 0 –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–π


// –≤ –∫–∞–∂–¥–æ–º —Å–ª—É—á–∞–µ —É –Ω–∞—Å –ø—Ä–æ–≥—Ä–∞–º–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–∞–∫–∂–µ –ø—Ä–∏ —Ç–∞–∫–æ–º –∫–æ–¥–µ

// –∑–∞—Ç–æ –∫–∞–∫–æ–π –ø—Ä–æ—Å—Ç–æ–π –∏ —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥ –º—ã –ø–æ–ª—É—á–∏–ª–∏!
```
—Ç–∞–∫–∞—è —à—Ç—É–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è copy and swap

–ø–ª—é—Å–æ–º –µ–µ –µ—â–µ —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è strong-exception guarantee, –æ—à–∏–±–æ–∫ —Ç–æ –≤—ã–∫–∏–Ω—É—Ç—å—Å—è –Ω–µ –º–æ–∂–µ—Ç

## **–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –ø—Ä–∏–µ–º**

```cpp
class Foo() {
public:
	Foo(const std::string& str) : str_(str) {}
}

private:
	std::string str_;
}
// –æ–±—ã—á–Ω—ã–π –∫–ª–∞—Å—Å

// –Ω–∞–ø–∏—à–µ–º
Foo(const std::string&& str) : str_(str) {}
// —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ—á–∫–∏ –±–µ–∑ –ª–∏—à–Ω–µ–π –∫–æ–ø–∏—Ä–∫–∏

// –∞ –∑–∞–º–µ—á–∞–µ–º —á—Ç–æ? –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å
Foo(std::string str) : str_(std::move(str)) {}

// –∑–∞–º–µ—Ç–∏–º, —á—Ç–æ –æ–Ω–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–∞–∫–∂–µ –∫–∞–∫ –∏ –¥–≤–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –≤ —Å—É–º–º–µ
```

–Ω—É –Ω–µ —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞ –ª–∏, –∞?


## **move constructor**

–¥–∞ –æ–ø—è—Ç—å –¥–∞ —Å–Ω–æ–≤–∞

–≤–æ–æ–±—â–µ –≥–æ–≤–æ—Ä—è move –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–æ–∑–¥–∞—Ç—Å—è —Ç–∞–∫ –∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∫ –∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π copy –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

—Å–æ–æ—Ç–≤–µ—Å—Ç–≤–µ–Ω–Ω–æ –µ—Å–ª–∏ –≤ copy –ø—Ä–æ—Å—Ç–æ –≤—Å–µ –ø–æ–ª—è –∫–æ–ø–∏—Ä—É—é—Ç—Å—è, —Ç–æ –≤ move –≤—Å–µ –ø–æ–ª—è –º—É–≤–∞—é—Ç—Å—è

–ù–æ –µ—Å—Ç—å —Ä—è–¥ —É—Å–ª–æ–≤–∏–π, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π move –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω(—Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –∏–∑):

1) –∫–∞—Å—Ç–æ–º–Ω—ã–π copy –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
2) –∫–∞—Å—Ç–æ–º–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è
3) –∫–∞—Å—Ç–æ–º–Ω—ã–π move –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä <-> –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–π move –æ–ø–µ—Ä–∞—Ç–æ—Ä
4) –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä

—Ç–æ –µ—Å—Ç—å –¥–∞ –ø—Ä–æ—Å—Ç–æ "–ø—Ä–∞–≤–∏–ª–æ 5", –µ—Å–ª–∏ —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏–ª–æ—Å—å, –∑–Ω–∞—á–∏—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤—Å–µ


–µ—â–µ –∫–æ–Ω–µ—á–Ω–æ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –º—É–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω, –µ—Å–ª–∏ –∫–∞–∫–æ–µ-—Ç–æ –ø–æ–ª–µ –Ω–µ–ª—å–∑—è –Ω–∏ –∑–∞–º—É–≤–∏—Ç—å –Ω–∏ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å

–∏ –µ—â–µ –≤—Å—è–∫–∏–µ —Å–ª—É—á–∞–∏ (–î–ó –ü–†–û–ß–ò–¢–ê–¢–¨ –ó–ê–í–¢–†–ê –í–°–ï–ú –†–ê–°–°–ö–ê–ó–ê–¢–¨)


```cpp
Foo(std::string str) : str_(std::move(str)) {}

// –∫–æ–≥–¥–∞ –º—ã –ø–∏—à–µ–º std::move() –º—ã –Ω–µ –∑–Ω–∞–µ–º –µ—Å—Ç—å –ª–∏ —É –∫–ª–∞—Å—Å–∞ move –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
// –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç –Ω–µ –≤—ã–≤–µ–¥–µ—Ç—Å—è –Ω–∏–∫–∞–∫–∞—è –æ—à–∏–±–∫–∞, –ø—Ä–æ—Å—Ç–æ –≤–º–µ—Å—Ç–æ move –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è copy

// –ø–æ—ç—Ç–æ–º—É —Ç–∞–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –ø–æ –ø—Ä–µ–∂–Ω–µ–º—É –±–µ—Å–ø–æ–¥–æ–±–Ω–∞
```